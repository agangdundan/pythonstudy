{"filter":false,"title":"study.html","tooltip":"/dataanalysis/templates/dataanalysis/study.html","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":399,"column":19},"end":{"row":399,"column":23},"action":"insert","lines":["json"]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":23},"end":{"row":399,"column":24},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":24},"end":{"row":399,"column":25},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":25},"end":{"row":399,"column":26},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":26},"end":{"row":399,"column":27},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":27},"end":{"row":399,"column":28},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":28},"end":{"row":399,"column":29},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":29},"end":{"row":399,"column":30},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":17},"end":{"row":408,"column":52},"action":"remove","lines":["[320, 302, 301, 334, 390, 330, 320]"]},{"start":{"row":408,"column":17},"end":{"row":408,"column":18},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":18},"end":{"row":408,"column":19},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":17},"end":{"row":408,"column":19},"action":"remove","lines":["js"]},{"start":{"row":408,"column":17},"end":{"row":408,"column":21},"action":"insert","lines":["json"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":21},"end":{"row":408,"column":22},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":22},"end":{"row":408,"column":23},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":23},"end":{"row":408,"column":24},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":23},"end":{"row":408,"column":24},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":23},"end":{"row":408,"column":24},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":24},"end":{"row":408,"column":25},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":25},"end":{"row":408,"column":26},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":26},"end":{"row":408,"column":27},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":27},"end":{"row":408,"column":28},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":28},"end":{"row":408,"column":29},"action":"insert","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":28},"end":{"row":408,"column":29},"action":"remove","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":27},"end":{"row":408,"column":28},"action":"remove","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":27},"end":{"row":408,"column":28},"action":"insert","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":415,"column":17},"end":{"row":415,"column":51},"action":"remove","lines":["[120, 132, 101, 134, 90, 230, 210]"]},{"start":{"row":415,"column":17},"end":{"row":415,"column":28},"action":"insert","lines":["json.colum1"]}]}],[{"group":"doc","deltas":[{"start":{"row":415,"column":27},"end":{"row":415,"column":28},"action":"remove","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":415,"column":27},"end":{"row":415,"column":28},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":20},"end":{"row":166,"column":54},"action":"remove","lines":["path='static/data/usagov_bitly_data2012-03-16-1331923249.txt'","    records=[json.loads(line) for line in open(path)]","    frame = DataFrame(records)","    clean_tz=frame['tz'].fillna('Missing')","    clean_tz[clean_tz=='']='Unknown'","    cframe = frame[frame.a.notnull()]","    oper_system=np.where(cframe['a'].str.contains('Windows'),'Windows','Not Windows')","    by_tz_os=cframe.groupby(['tz',oper_system])","    agg_counts=by_tz_os.size().unstack().fillna(0)","    indexer=agg_counts.sum(1).argsort() #sum(1) is add all columns，argsort()，show the index.","    count_subset=agg_counts.take(indexer)[-10:]","    ","    plt.figure(figsize=(8,6), dpi=80)","    count_subset.plot(kind='bar',rot=45,stacked=True)","    plt.savefig('static/plot/study/tz_opersystem.png')"]},{"start":{"row":152,"column":20},"end":{"row":169,"column":70},"action":"insert","lines":["path='static/data/usagov_bitly_data2012-03-16-1331923249.txt'","    records=[json.loads(line) for line in open(path)]","    frame = DataFrame(records)","    cframe = frame[frame.a.notnull()]","    oper_system=np.where(cframe['a'].str.contains('Windows'),'Windows','Not Windows')","    by_tz_os=cframe.groupby(['tz',oper_system])","    agg_counts=by_tz_os.size().unstack().fillna(0)","    indexer=agg_counts.sum(1).argsort()","    count_subset=agg_counts.take(indexer)[-10:]","    ","    plt.figure(figsize=(8,6), dpi=80)","    count_subset.plot(kind='bar',rot=45,stacked=True)","    plt.savefig('static/plot/study/tz_opersystem.png')","    keys=[x.encode('ascii') for x in count_subset.keys().tolist()]","    indexs=[x.encode('ascii') for x in count_subset.index.tolist()]","    colum1=[x for x,y in count_subset.values]","    colum2=[y for x,y in count_subset.values]","    data={\"keys\":keys,\"indexs\":indexs,\"colum1\":colum1,\"colum2\":colum2}"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":16},"end":{"row":152,"column":20},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":12},"end":{"row":152,"column":16},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":8},"end":{"row":152,"column":12},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":4},"end":{"row":152,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":358,"column":0},"end":{"row":360,"column":0},"action":"remove","lines":["          //opechartInit(json);","          alert(json.keys);",""]}]}],[{"group":"doc","deltas":[{"start":{"row":269,"column":0},"end":{"row":275,"column":0},"action":"remove","lines":["function opechartInit(jsondata)","{","        //Echart start","","        ","}",""]}]}],[{"group":"doc","deltas":[{"start":{"row":376,"column":15},"end":{"row":376,"column":19},"action":"remove","lines":["true"]},{"start":{"row":376,"column":15},"end":{"row":376,"column":16},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":376,"column":16},"end":{"row":376,"column":17},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":376,"column":17},"end":{"row":376,"column":18},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":376,"column":18},"end":{"row":376,"column":19},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":376,"column":19},"end":{"row":376,"column":20},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":213,"column":0},"end":{"row":214,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":214,"column":0},"end":{"row":215,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":0},"end":{"row":216,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":1},"end":{"row":211,"column":2},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":2},"end":{"row":211,"column":3},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":3},"end":{"row":211,"column":5},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":4},"end":{"row":211,"column":5},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":5},"end":{"row":211,"column":6},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":6},"end":{"row":211,"column":7},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":7},"end":{"row":211,"column":8},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":8},"end":{"row":211,"column":9},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":9},"end":{"row":211,"column":10},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":10},"end":{"row":211,"column":12},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":13},"end":{"row":212,"column":0},"action":"insert","lines":["",""]},{"start":{"row":212,"column":0},"end":{"row":212,"column":1},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":212,"column":1},"end":{"row":212,"column":2},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":212,"column":2},"end":{"row":214,"column":2},"action":"insert","lines":["","     "," }"]}]}],[{"group":"doc","deltas":[{"start":{"row":211,"column":11},"end":{"row":211,"column":21},"action":"insert","lines":["op_ECharts"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":0},"end":{"row":217,"column":1},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":1},"end":{"row":217,"column":2},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":2},"end":{"row":217,"column":3},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":0},"end":{"row":217,"column":3},"action":"remove","lines":["fun"]},{"start":{"row":217,"column":0},"end":{"row":217,"column":8},"action":"insert","lines":["function"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":8},"end":{"row":217,"column":9},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":9},"end":{"row":217,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":10},"end":{"row":217,"column":11},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":11},"end":{"row":217,"column":12},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":12},"end":{"row":217,"column":13},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":12},"end":{"row":217,"column":13},"action":"remove","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":11},"end":{"row":217,"column":12},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":11},"end":{"row":217,"column":12},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":12},"end":{"row":217,"column":13},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":13},"end":{"row":217,"column":14},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":14},"end":{"row":217,"column":15},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":15},"end":{"row":217,"column":16},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":16},"end":{"row":217,"column":17},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":17},"end":{"row":217,"column":18},"action":"insert","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":18},"end":{"row":217,"column":19},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":19},"end":{"row":217,"column":20},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":20},"end":{"row":217,"column":21},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":21},"end":{"row":217,"column":23},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":217,"column":23},"end":{"row":218,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":218,"column":0},"end":{"row":218,"column":1},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":218,"column":1},"end":{"row":220,"column":1},"action":"insert","lines":["","    ","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":219,"column":4},"end":{"row":220,"column":43},"action":"insert","lines":[" var urlEchartData=\"{% url 'dataanalysis:urlEchartData'%}\";","    $.getJSON(urlEchartData,function(json){"]}]}],[{"group":"doc","deltas":[{"start":{"row":219,"column":4},"end":{"row":219,"column":5},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":220,"column":43},"end":{"row":221,"column":0},"action":"insert","lines":["",""]},{"start":{"row":221,"column":0},"end":{"row":221,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":221,"column":8},"end":{"row":221,"column":9},"action":"insert","lines":["}"]},{"start":{"row":221,"column":0},"end":{"row":221,"column":8},"action":"remove","lines":["        "]},{"start":{"row":221,"column":0},"end":{"row":221,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":221,"column":5},"end":{"row":221,"column":6},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":221,"column":6},"end":{"row":221,"column":7},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":220,"column":43},"end":{"row":221,"column":0},"action":"insert","lines":["",""]},{"start":{"row":221,"column":0},"end":{"row":221,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":219,"column":47},"end":{"row":219,"column":48},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":219,"column":47},"end":{"row":219,"column":48},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":219,"column":47},"end":{"row":219,"column":48},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":219,"column":48},"end":{"row":219,"column":49},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":219,"column":47},"end":{"row":219,"column":48},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":219,"column":47},"end":{"row":219,"column":48},"action":"insert","lines":["O"]}]}],[{"group":"doc","deltas":[{"start":{"row":219,"column":8},"end":{"row":219,"column":21},"action":"remove","lines":["urlEchartData"]},{"start":{"row":219,"column":8},"end":{"row":219,"column":23},"action":"insert","lines":["urlOpEchartData"]}]}],[{"group":"doc","deltas":[{"start":{"row":220,"column":14},"end":{"row":220,"column":27},"action":"remove","lines":["urlEchartData"]},{"start":{"row":220,"column":14},"end":{"row":220,"column":29},"action":"insert","lines":["urlOpEchartData"]}]}],[{"group":"doc","deltas":[{"start":{"row":364,"column":9},"end":{"row":428,"column":11},"action":"remove","lines":[" ","          require.config({","            paths: {","            echarts: '{% static \"plugins/echarts/dist\" %}'","          }","         });","         require(","         [","            'echarts',","            'echarts/chart/bar'","         ],","         function (ec) {","             var myChart = ec.init(document.getElementById('timeZoneOpEchart'));","             var option = {","    tooltip : {","        trigger: 'axis',","        axisPointer : {            // 坐标轴指示器，坐标轴触发有效","            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'","        }","    },","    legend: {","        data:json.keys","    },","    toolbox: {","        show : false,","        feature : {","            mark : {show: true},","            dataView : {show: true, readOnly: false},","            magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},","            restore : {show: true},","            saveAsImage : {show: true}","        }","    },","    calculable : true,","    xAxis : [","        {","            type : 'value'","        }","    ],","    yAxis : [","        {","            type : 'category',","            data : json.indexs","        }","    ],","    series : [","        {","            name:'Not Windows',","            type:'bar',","            stack: '总量',","            itemStyle : { normal: {label : {show: true, position: 'insideRight'}}},","            data:json.colum1","        },","        {","            name:'Windows',","            type:'bar',","            stack: '总量',","            itemStyle : { normal: {label : {show: true, position: 'insideRight'}}},","            data:json.colum2","        }","    ]","};","              myChart.setOption(option);","           }","         );"]}]}],[{"group":"doc","deltas":[{"start":{"row":221,"column":8},"end":{"row":285,"column":11},"action":"insert","lines":[" ","          require.config({","            paths: {","            echarts: '{% static \"plugins/echarts/dist\" %}'","          }","         });","         require(","         [","            'echarts',","            'echarts/chart/bar'","         ],","         function (ec) {","             var myChart = ec.init(document.getElementById('timeZoneOpEchart'));","             var option = {","    tooltip : {","        trigger: 'axis',","        axisPointer : {            // 坐标轴指示器，坐标轴触发有效","            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'","        }","    },","    legend: {","        data:json.keys","    },","    toolbox: {","        show : false,","        feature : {","            mark : {show: true},","            dataView : {show: true, readOnly: false},","            magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},","            restore : {show: true},","            saveAsImage : {show: true}","        }","    },","    calculable : true,","    xAxis : [","        {","            type : 'value'","        }","    ],","    yAxis : [","        {","            type : 'category',","            data : json.indexs","        }","    ],","    series : [","        {","            name:'Not Windows',","            type:'bar',","            stack: '总量',","            itemStyle : { normal: {label : {show: true, position: 'insideRight'}}},","            data:json.colum1","        },","        {","            name:'Windows',","            type:'bar',","            stack: '总量',","            itemStyle : { normal: {label : {show: true, position: 'insideRight'}}},","            data:json.colum2","        }","    ]","};","              myChart.setOption(option);","           }","         );"]}]}],[{"group":"doc","deltas":[{"start":{"row":213,"column":5},"end":{"row":213,"column":19},"action":"insert","lines":["opechartInit()"]}]}],[{"group":"doc","deltas":[{"start":{"row":213,"column":19},"end":{"row":213,"column":20},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":428,"column":0},"end":{"row":429,"column":0},"action":"remove","lines":["         ",""]}]}]]},"ace":{"folds":[],"scrolltop":5100,"scrollleft":0,"selection":{"start":{"row":346,"column":0},"end":{"row":347,"column":18},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":339,"state":"js-start","mode":"ace/mode/html"}},"timestamp":1419227012000,"hash":"bd121ef8f267fb8b176af08d5bf7e77e08275755"}